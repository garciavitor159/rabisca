form.addEventListener("submit",async(e)=>{e.preventDefault();const valNomeUsuario=nomeUsuario.value.trim();const valEmail=email.value.trim();const valSenha=senha.value.trim();const valPerguntaSeguranca=Number(perguntaSeguranca.value.trim());const valResposta=resposta.value.trim();if(!validarCampoObrigatorio(nomeUsuario,valNomeUsuario,50)){exibirErr("Erro: O nome de usuário é obrigatório e deve conter até 50 caracteres. Por favor, tente novamente.",nomeUsuario);return}
if(!validarEmail(email,valEmail)){exibirErr("Erro: O e-mail é obrigatório, deve ser válido e conter até 80 caracteres. Por favor, tente novamente.",email);return}
if(!validarSenha(senha,valSenha)){exibirErr("Erro: A senha é obrigatória e deve conter entre 8 e 30 caracteres, incluindo uma letra minúscula, uma letra maiúscula, um número e um símbolo. Por favor, tente novamente.",senha);return}
if(!validarPerguntaSeguranca(perguntaSeguranca,valPerguntaSeguranca)){exibirErr("Erro: Pergunta de segurança inválida ou não selecionada. Por favor, tente novamente.",perguntaSeguranca);return}
if(!validarCampoObrigatorio(resposta,valResposta,70)){exibirErr("Erro: A resposta é obrigatória e deve conter até 70 caracteres. Por favor, tente novamente.",resposta);return}
const{sucesso,dados,msg}=await enviarDados({acao:"cadastrar-usuario",nomeUsuario:valNomeUsuario,email:valEmail,senha:valSenha,perguntaSeguranca:valPerguntaSeguranca,resposta:valResposta,},"cadastrar-usuario.php","POST");if(!sucesso){const{campoErr}=dados;alternarModalAlerta(!0,msg);switch(campoErr){case "nome-usuario":limparCampo(nomeUsuario);break;case "email":limparCampo(email);break;case "senha":limparCampo(senha);break;case "pergunta-seguranca":limparCampo(perguntaSeguranca);break;case "resposta":limparCampo(resposta);break;default:[nomeUsuario,email,senha,perguntaSeguranca,resposta].forEach((el)=>limparCampo(el))}
return}
redirecionar(msg,"fazer-login.html")})